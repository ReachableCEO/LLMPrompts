#!/bin/bash
# Copyright (C) 2025 ReachableCEO Enterprises LLC
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Test Suite for JoplinDSR script
set -euo pipefail
trap "echo 'An error occurred during tests'; exit 1" ERR

echo "Running test suite for JoplinDSR..."

# Test: Environment Variables
echo "Test 1: Validate environment variable handling"
export JOPLIN_HOST="test_host"
export JOPLIN_PORT="1234"
export JOPLIN_SOURCE_NOTE_TITLE="Test Note"
export JOPLIN_TARGET_NOTEBOOK="Test Notebook"
export JOPLIN_TOKEN="test_token"

if ! ./JoplinDSR-MMDDYYYY-HHMM.txt; then
    echo "Test 1 failed."
    exit 1
fi

echo "All tests passed successfully."
